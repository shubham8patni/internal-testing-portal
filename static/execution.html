<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Execution - Internal Testing Portal</title>
    <link rel="stylesheet" href="/static/css/styles.css">

    <!-- JSONEditor Library for API response display -->
    <link href="https://cdn.jsdelivr.net/npm/jsoneditor@9.10.0/dist/jsoneditor.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jsoneditor@9.10.0/dist/jsoneditor.min.js"></script>
</head>
<body>
    <header>
        <h1>Internal Testing Portal</h1>
        <p style="margin: 5px 0 0; opacity: 0.9;">Real-Time Test Execution Dashboard</p>
    </header>

    <div class="container">
        <div class="main-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1>Test Execution</h1>
                <div id="overall-status"></div>
            </div>

            <div id="tabs-header" class="tabs-header">
                <!-- Tabs will be dynamically loaded -->
            </div>

            <div id="tab-content" class="tab-content">
                <h3>Select a tab to view execution progress</h3>
                <p>Each tab represents a Category ‚Üí Product ‚Üí Plan combination</p>
            </div>
        </div>

        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
            <a href="/static/config.html">‚Üê Configure New Test</a>
            <span style="margin: 0 15px;">|</span>
            <a href="/static/history.html">View History</a>
        </div>
    </div>

    <footer>
        <p>Internal Testing Portal v1.0.0 | Powered by FastAPI</p>
    </footer>

    <!-- API Comparison Modal - 80% viewport -->
    <div id="api-comparison-modal" class="modal-overlay hidden">
      <div class="modal-content large-comparison-modal">
        <!-- Modal Header -->
        <div class="modal-header">
          <h2>üîç API Response Comparison</h2>
          <div class="api-info">
            <span class="api-step-badge" id="modal-api-step">LOADING...</span>
            <span class="execution-context" id="modal-execution-context">Loading...</span>
          </div>
          <button class="modal-close-btn" onclick="closeApiComparisonModal()">&times;</button>
        </div>

        <!-- Comparison Panels Container -->
        <div class="comparison-panels">
          <!-- Target Environment Panel -->
          <div class="response-panel target-panel">
            <div class="panel-header">
              <span class="env-badge target-badge">üéØ Target (<span id="target-env">DEV</span>)</span>
              <span class="status-indicator" id="target-status-indicator">
                ‚óã LOADING...
              </span>
            </div>
            <div class="json-container" id="target-json-container">
              <div class="json-loading">
                <div class="spinner"></div>
                <p>Loading API response...</p>
              </div>
            </div>
          </div>

          <!-- Staging Environment Panel -->
          <div class="response-panel staging-panel">
            <div class="panel-header">
              <span class="env-badge staging-badge">üì¶ Staging</span>
              <span class="status-indicator" id="staging-status-indicator">
                ‚óã LOADING...
              </span>
            </div>
            <div class="json-container" id="staging-json-container">
              <div class="json-loading">
                <div class="spinner"></div>
                <p>Loading API response...</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal Footer -->
        <div class="modal-footer">
          <button class="action-btn copy-btn" onclick="copyApiResponse('target')">
            üìã Copy Target
          </button>
          <button class="action-btn copy-btn" onclick="copyApiResponse('staging')">
            üìã Copy Staging
          </button>
          <button class="action-btn close-modal-btn" onclick="closeApiComparisonModal()">
            ‚úï Close
          </button>
        </div>
      </div>
    </div>

    <script src="/static/js/common.js"></script>
    <script src="/static/js/execution.js"></script>
</body>
</html>
